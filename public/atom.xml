<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>刘健超(Jc)&#39;s Blog</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-04-05T09:26:00.448Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>刘健超</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2016/04/05/hello-world/"/>
    <id>http://yoursite.com/2016/04/05/hello-world/</id>
    <published>2016-04-04T16:33:23.983Z</published>
    <updated>2016-04-05T09:26:00.448Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&quot;My New Post&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
      <category term="PS3" scheme="http://yoursite.com/tags/PS3/"/>
    
      <category term="Games" scheme="http://yoursite.com/tags/Games/"/>
    
  </entry>
  
  <entry>
    <title>实现类似 QQ音乐网页版 的单页面总结</title>
    <link href="http://yoursite.com/2015/08/23/2015-8-23-build-similar-qqmusice/"/>
    <id>http://yoursite.com/2015/08/23/2015-8-23-build-similar-qqmusice/</id>
    <published>2015-08-23T08:13:00.000Z</published>
    <updated>2016-04-05T16:48:09.601Z</updated>
    
    <content type="html">&lt;p&gt;最近需要对创业团队的网站进行改版，而我负责前端设计和实现。&lt;br&gt;下面是一些总结与体会：&lt;br&gt;当设计完成之前，我就跟和我配合的Java 后台说用iframe实现，结果说麻烦不肯，到最后突然对我说还是用iframe吧，说他以前也用过，很简单–！…其实我之间也基本没用iframe，对它比较陌生，但是 QQmusic 网页版就是用iframe 做的，印象比较深刻！&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;我设计的页面总体结构是与QQmusic网页版类似，网页头部和脚部都是固定，中间内容是通过iframe来展示。&lt;/p&gt;
&lt;p&gt;用iframe之前，我想到要解决的问题有：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;iframe虽然有height这个属性，但是每次加载到里面的内容都是不同的，而且我实现的部分页面是需要动态加载能容的。&lt;br&gt;我的解决办法是：&lt;br&gt;iframe 首次加载成功后和 &lt;code&gt;iframe&lt;/code&gt; 页面内有动态增加内容时（导致整体高度有变化）都调用下面这个函数，来设置 &lt;code&gt;iframe&lt;/code&gt; 高度&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function iframeLoaded() {
    var contentFrame = document.getElementById(&amp;apos;contentFrame&amp;apos;);
    if(contentFrame) {
        contentFrame.height = contentFrame.contentWindow.document.documentElement.scrollHeight + &amp;quot;px&amp;quot;;
    }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;因为是做成像QQmusic网页版的单页面，所以我也利用hash变化来欺骗浏览器，让浏览器为我的页面跳转生成历史记录，但是后来发现，每次点击链接加载不用iframe时，都会生成两条相同的历史记录。这是为什么呢？后来发现，hash值改变会导致一次，iframe的src改变也会生成一次历史记录(包括hash的改变)。然后我又去看看QQmusic 是怎么实现只产生一次历史记录的，惊奇的发现，它的iframe的src一直没变（一直是 about:blank）。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;iframe name=&amp;quot;contentFrame&amp;quot; id=&amp;quot;contentFrame&amp;quot; width=&amp;quot;100%&amp;quot; height=&amp;quot;2207px&amp;quot; allowtransparency=&amp;quot;true&amp;quot; scrolling=&amp;quot;no&amp;quot; border=&amp;quot;0&amp;quot; frameborder=&amp;quot;0&amp;quot; src=&amp;quot;about:blank&amp;quot;&amp;gt;&amp;lt;/iframe&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;因此发现我之前对iframe有些误解，之前认为iframe只能通过src来获取内容，其实个人认为正确的是：iframe中的内容不一定是通过设置src后获取的，也可以是通过其它方式（例如通过ajax获取html后替换原视图而成）；所以对于QQmusic来说，iframe只是一块渲染视图的容器，它里面显示的内容是由另外的逻辑来控制的。这样无须改变iframe的src（也就不会产生历史记录），从而可以动态修改iframe的内容了。如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;window.onload = function(){
    var iframe = document.getElementById(&amp;quot;iframe&amp;quot;)
    var newDiv = document.createElement(&amp;quot;div&amp;quot;)
    newDiv.innerHTML = &amp;quot;我要跑到iframe里&amp;quot;
    iframe.contentWindow.document.body.appendChild(newDiv)
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;对于整体页面（用jQuery发出异步请求）&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$.ajax({
    url: &amp;quot;原本iframe的src值&amp;quot;,    // 改为异步请求加载
    type: &amp;quot;GET&amp;quot;
})
.done(function(data){
     var iframe = document.getElementById(&amp;quot;iframe&amp;quot;)
     iframe.contentWindow.document.documentElement.innerHTML = data;  // 获取后直接插到iframe
})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;所以，iframe的内容一直在改变，而它的src却一直是about:blank没变。因此也不会产生新的历史记录。&lt;br&gt;此时此刻，我心情是很开心的，然而，当我与iframe内的元素交互时，发现除了 CSS 的交互效果，&lt;script src=&quot;&quot;&gt;&lt;/script&gt;和写在&lt;script&gt;&lt;/script&gt;内的js代码都是不执行的（测试后发现直接添加到元素的onclick事件可以执行），而且在测试的过程中发现有时候CSS加载比较慢，导致HTML裸露出来，不知道为什么。这个要继续查查。&lt;/p&gt;
&lt;p&gt;所以，最后我不采用通过ajax获取内容，再添加到iframe的做法。&lt;br&gt;而是采用移除原来iframe，再新建一个iframe插入的方式，这种方式也是不会产生新的历史记录。&lt;/p&gt;
&lt;p&gt;解决了产生两条历史记录的问题后，剩下的问题就是iframe内的链接跳转，因为整体是通过主页面的hash值来路由的，所以iframe内的链接跳转是不能直接跳转的，他的跳转需要一定处理的流程：&lt;/p&gt;
&lt;p&gt;处理由iframe内发送的请求：&lt;br&gt;  ①首先接收iframe的参数&lt;br&gt;  ②根据参数生成对应的hash，并修改main_frame 的hash值&lt;br&gt;  ③根据hash值，修改iframe的src（我是通过删除原来的iframe，再添加新iframe的做法）&lt;/p&gt;
&lt;p&gt;如：主页面的全局有一个接收iframe内a标签的data-hash的函数:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;function handleIframeRequst( iframeHash){
    window.location.hash = iframeHash;
}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;假设iframe内的一个a标签 ： &lt;a href=&quot;javascript:;&quot; data-hash=&quot;main&amp;sub&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;/a&gt;&lt;br&gt;点击这个标签时，就会调用主页面的一个处理该data-hash的函数&lt;br&gt;parent.handleIframeRequst($(this).data(“hash”)); // 通过parent调用主页面的函数&lt;/p&gt;
&lt;p&gt;主页面接收参数后，修改自身的hash值，然后解析hash值，生成相应的 iframe src值。&lt;/p&gt;
&lt;p&gt;这样基本就可以将网站做成 类似 QQmusic 那样的单页面网站啦。 满足感 Up！Up！Up！&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;最近需要对创业团队的网站进行改版，而我负责前端设计和实现。&lt;br&gt;下面是一些总结与体会：&lt;br&gt;当设计完成之前，我就跟和我配合的Java 后台说用iframe实现，结果说麻烦不肯，到最后突然对我说还是用iframe吧，说他以前也用过，很简单–！…其实我之间也基本没用iframe，对它比较陌生，但是 QQmusic 网页版就是用iframe 做的，印象比较深刻！&lt;br&gt;
    
    </summary>
    
      <category term="原创" scheme="http://yoursite.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="iframe" scheme="http://yoursite.com/tags/iframe/"/>
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
      <category term="hash" scheme="http://yoursite.com/tags/hash/"/>
    
  </entry>
  
  <entry>
    <title>如何为不定高度(height:auto)的元素添加CSS3 transition-property:height 动画</title>
    <link href="http://yoursite.com/2015/03/23/2015-6-23-css-transition-height-0-to-height-auto/"/>
    <id>http://yoursite.com/2015/03/23/2015-6-23-css-transition-height-0-to-height-auto/</id>
    <published>2015-03-22T16:47:42.000Z</published>
    <updated>2016-04-05T16:51:12.427Z</updated>
    
    <content type="html">&lt;p&gt;但一个元素不设置height时，它的默认值是 auto，浏览器会计算出实际的高度。&lt;br&gt;但如果想给一个 height:auto 的块级元素的高度添加 CSS3 动画时，该怎么办呢？&lt;br&gt;从 MDN 的可以查到 CSS 支持动画的属性中的 height 属性如下：&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;height ：yes, as a length, percentage or calc(); // 当 height 的值是 length，百分比或 calc() 时支持 CSS3 过渡。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;所以当元素 height : auto 时，是不支持 CSS3 动画的。&lt;/p&gt;
&lt;p&gt;除了通过 JS 获取精确的 height 值的方法外，其实我们可以使用 max-height 代替 height。&lt;/p&gt;
&lt;p&gt;只要我们设置一个肯定比元素自增长大的高度值就可以了。当然，因为是根据 max-height 值进行过渡效果，所以最好不要大得离谱，否则动画效果不理想。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
    &amp;lt;head&amp;gt;
        &amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
        &amp;lt;style&amp;gt;
            *{
                margin: 0;
                padding:0;
            }
            div{

                display: inline-block;
                overflow: hidden;
                background-color: orange;
                max-height: 20px;
                -webkit-transition: max-height 1s;
                transition: max-height 1s;
            }
            div:hover{
                max-height:200px;
            }
        &amp;lt;/style&amp;gt;
    &amp;lt;/head&amp;gt;
    &amp;lt;body&amp;gt;
        &amp;lt;div&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
            &amp;lt;p&amp;gt;我不是height，是max-height&amp;lt;/p&amp;gt;
        &amp;lt;/div&amp;gt;
    &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;参考资源：&lt;a href=&quot;http://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是我第一篇博客文章，希望能让大家学到东西。当然，我更希望收到大家对我的建议！&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;但一个元素不设置height时，它的默认值是 auto，浏览器会计算出实际的高度。&lt;br&gt;但如果想给一个 height:auto 的块级元素的高度添加 CSS3 动画时，该怎么办呢？&lt;br&gt;从 MDN 的可以查到 CSS 支持动画的属性中的 height 属性如下：&lt;br&gt;
    
    </summary>
    
      <category term="原创" scheme="http://yoursite.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="css3" scheme="http://yoursite.com/tags/css3/"/>
    
      <category term="transiton" scheme="http://yoursite.com/tags/transiton/"/>
    
  </entry>
  
</feed>
